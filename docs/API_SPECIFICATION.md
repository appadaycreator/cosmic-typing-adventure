# Cosmic Typing Adventure APIä»•æ§˜æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.1.0  
**æœ€çµ‚æ›´æ–°**: 2026-01-30

## ğŸ“‹ å¤‰æ›´å±¥æ­´

### v1.1.0 (2026-01-30)
- UI/UXå¤§å¹…æ”¹å–„ï¼šè¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã€ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–
- ã‚¿ã‚¤ãƒ”ãƒ³ã‚°å…¥åŠ›æ¬„ã®è¦–èªæ€§å‘ä¸Šï¼ˆ3pxæ ç·šã€ã‚°ãƒ­ãƒ¼åŠ¹æœï¼‰
- ãƒœã‚¿ãƒ³çŠ¶æ…‹ã®æ˜ç¢ºåŒ–ï¼ˆç„¡åŠ¹çŠ¶æ…‹ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¼·åŒ–ï¼ˆã‚·ã‚§ã‚¤ã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã€æ³¢ç·šï¼‰
- ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–ï¼ˆ56pxã‚¿ãƒƒãƒã‚¿ãƒ¼ã‚²ãƒƒãƒˆã€16pxãƒ•ã‚©ãƒ³ãƒˆï¼‰
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ”¹å–„ï¼ˆ12pxé«˜ã•ã€ã‚·ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

## æ¦‚è¦

Cosmic Typing Adventureã¯ã€Supabaseã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹å®‡å®™ãƒ†ãƒ¼ãƒã®ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ç·´ç¿’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€APIã®è©³ç´°ä»•æ§˜ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€èªè¨¼ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ç›®æ¬¡

1. [èªè¨¼](#èªè¨¼)
2. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ](#ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ)
3. [APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ](#apiã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
4. [ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½](#ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½)
5. [ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](#ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°)
6. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
7. [ãƒ¬ãƒ¼ãƒˆåˆ¶é™](#ãƒ¬ãƒ¼ãƒˆåˆ¶é™)
8. [ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼](#ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼)

## èªè¨¼

### èªè¨¼æ–¹å¼
- **Supabase Auth**: ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
- **åŒ¿åèªè¨¼**: ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨
- **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³**: Googleã€GitHubï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰

### èªè¨¼ãƒ•ãƒ­ãƒ¼

```javascript
// 1. åŒ¿åèªè¨¼ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
const { data, error } = await supabase.auth.signInAnonymously()

// 2. ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
const { data, error } = await supabase.auth.signUp({
  email: 'user@example.com',
  password: 'password123'
})

// 3. ãƒ­ã‚°ã‚¤ãƒ³
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'password123'
})

// 4. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
const { error } = await supabase.auth.signOut()
```

### ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
```javascript
// ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®ç›£è¦–
supabase.auth.onAuthStateChange((event, session) => {
  console.log('Auth state changed:', event, session)
})
```

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

#### 1. users
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE,
  username VARCHAR(100),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  preferences JSONB DEFAULT '{}',
  is_anonymous BOOLEAN DEFAULT false
);
```

#### 2. typing_sessions
```sql
CREATE TABLE typing_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  planet_id VARCHAR(50) NOT NULL,
  wpm DECIMAL(5,2),
  cpm DECIMAL(5,2),
  accuracy DECIMAL(5,2),
  total_words INTEGER,
  total_characters INTEGER,
  errors_count INTEGER,
  time_taken INTEGER, -- seconds
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  text_id VARCHAR(100),
  difficulty_level VARCHAR(20)
);
```

#### 3. practice_texts
```sql
CREATE TABLE practice_texts (
  id VARCHAR(100) PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  content TEXT NOT NULL,
  planet_id VARCHAR(50) NOT NULL,
  difficulty_level VARCHAR(20) DEFAULT 'medium',
  word_count INTEGER,
  character_count INTEGER,
  language VARCHAR(10) DEFAULT 'ja',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  is_active BOOLEAN DEFAULT true
);
```

#### 4. user_preferences
```sql
CREATE TABLE user_preferences (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  theme VARCHAR(20) DEFAULT 'dark',
  sound_enabled BOOLEAN DEFAULT true,
  keyboard_layout VARCHAR(20) DEFAULT 'qwerty',
  show_wpm BOOLEAN DEFAULT true,
  show_cpm BOOLEAN DEFAULT true,
  show_accuracy BOOLEAN DEFAULT true,
  auto_save BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 5. achievements
```sql
CREATE TABLE achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  achievement_type VARCHAR(50) NOT NULL,
  achievement_name VARCHAR(100) NOT NULL,
  description TEXT,
  earned_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  metadata JSONB DEFAULT '{}'
);
```

#### 6. statistics
```sql
CREATE TABLE statistics (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  total_sessions INTEGER DEFAULT 0,
  total_time INTEGER DEFAULT 0, -- minutes
  average_wpm DECIMAL(5,2) DEFAULT 0,
  average_accuracy DECIMAL(5,2) DEFAULT 0,
  best_wpm DECIMAL(5,2) DEFAULT 0,
  total_words_typed INTEGER DEFAULT 0,
  total_characters_typed INTEGER DEFAULT 0,
  planets_visited TEXT[], -- array of planet IDs
  last_activity TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ãƒ“ãƒ¥ãƒ¼

#### 1. user_typing_stats
```sql
CREATE VIEW user_typing_stats AS
SELECT 
  u.id as user_id,
  u.username,
  COUNT(ts.id) as total_sessions,
  AVG(ts.wpm) as avg_wpm,
  AVG(ts.accuracy) as avg_accuracy,
  MAX(ts.wpm) as best_wpm,
  SUM(ts.total_words) as total_words,
  SUM(ts.time_taken) as total_time_seconds
FROM users u
LEFT JOIN typing_sessions ts ON u.id = ts.user_id
GROUP BY u.id, u.username;
```

#### 2. planet_performance
```sql
CREATE VIEW planet_performance AS
SELECT 
  planet_id,
  COUNT(*) as sessions_count,
  AVG(wpm) as avg_wpm,
  AVG(accuracy) as avg_accuracy,
  AVG(time_taken) as avg_time
FROM typing_sessions
GROUP BY planet_id;
```

## APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### èªè¨¼é–¢é€£

#### POST /auth/signup
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "email": "user@example.com",
  "password": "password123",
  "username": "cosmic_typer"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "username": "cosmic_typer"
  }
}
```

#### POST /auth/signin
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

#### POST /auth/signout
ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

### ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³

#### POST /api/sessions
æ–°ã—ã„ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ä½œæˆ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "planet_id": "mars",
  "text_id": "mars_001",
  "difficulty_level": "medium"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "success": true,
  "session": {
    "id": "uuid",
    "planet_id": "mars",
    "text_id": "mars_001",
    "difficulty_level": "medium",
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

#### PUT /api/sessions/{session_id}
ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æ›´æ–°

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "wpm": 45.5,
  "cpm": 180.2,
  "accuracy": 95.8,
  "total_words": 150,
  "total_characters": 720,
  "errors_count": 7,
  "time_taken": 120
}
```

#### GET /api/sessions
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ã‚’å–å¾—

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `limit`: å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ï¼‰
- `offset`: ã‚ªãƒ•ã‚»ãƒƒãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼‰
- `planet_id`: æƒ‘æ˜Ÿãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- `date_from`: é–‹å§‹æ—¥
- `date_to`: çµ‚äº†æ—¥

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "sessions": [
    {
      "id": "uuid",
      "planet_id": "mars",
      "wpm": 45.5,
      "accuracy": 95.8,
      "created_at": "2024-01-01T00:00:00Z"
    }
  ],
  "total": 150,
  "has_more": true
}
```

### çµ±è¨ˆãƒ‡ãƒ¼ã‚¿

#### GET /api/statistics
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çµ±è¨ˆæƒ…å ±ã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "total_sessions": 150,
  "total_time_minutes": 1800,
  "average_wpm": 42.3,
  "average_accuracy": 94.2,
  "best_wpm": 65.8,
  "total_words_typed": 45000,
  "planets_visited": ["mars", "jupiter", "saturn"],
  "recent_activity": [
    {
      "date": "2024-01-01",
      "sessions": 5,
      "avg_wpm": 45.2
    }
  ]
}
```

#### GET /api/statistics/planets
æƒ‘æ˜Ÿåˆ¥ã®çµ±è¨ˆæƒ…å ±ã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "planets": [
    {
      "planet_id": "mars",
      "sessions_count": 25,
      "avg_wpm": 43.2,
      "avg_accuracy": 94.5,
      "best_wpm": 58.3
    }
  ]
}
```

### ç·´ç¿’ãƒ†ã‚­ã‚¹ãƒˆ

#### GET /api/texts
ç·´ç¿’ãƒ†ã‚­ã‚¹ãƒˆä¸€è¦§ã‚’å–å¾—

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:**
- `planet_id`: æƒ‘æ˜Ÿãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- `difficulty`: é›£æ˜“åº¦ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- `language`: è¨€èªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "texts": [
    {
      "id": "mars_001",
      "title": "ç«æ˜Ÿæ¢æ¤œ",
      "content": "ç«æ˜Ÿã¯å¤ªé™½ç³»ã®ç¬¬4æƒ‘æ˜Ÿã§ã™...",
      "planet_id": "mars",
      "difficulty_level": "medium",
      "word_count": 150,
      "character_count": 720
    }
  ]
}
```

#### GET /api/texts/{text_id}
ç‰¹å®šã®ç·´ç¿’ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—

### ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š

#### GET /api/preferences
ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "theme": "dark",
  "sound_enabled": true,
  "keyboard_layout": "qwerty",
  "show_wpm": true,
  "show_cpm": true,
  "show_accuracy": true,
  "auto_save": true
}
```

#### PUT /api/preferences
ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’æ›´æ–°

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```json
{
  "theme": "light",
  "sound_enabled": false,
  "show_wpm": true
}
```

### å®Ÿç¸¾

#### GET /api/achievements
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å®Ÿç¸¾ä¸€è¦§ã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹:**
```json
{
  "achievements": [
    {
      "id": "uuid",
      "achievement_type": "speed",
      "achievement_name": "ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¹ã‚¿ãƒ¼",
      "description": "WPM 50ä»¥ä¸Šã‚’é”æˆ",
      "earned_at": "2024-01-01T00:00:00Z",
      "metadata": {
        "wpm": 52.3
      }
    }
  ]
}
```

## ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆæ›´æ–°
```javascript
// çµ±è¨ˆã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã‚’è³¼èª­
const subscription = supabase
  .channel('typing_stats')
  .on('postgres_changes', 
    { event: 'INSERT', schema: 'public', table: 'typing_sessions' },
    (payload) => {
      console.log('New session:', payload.new)
      updateStatistics(payload.new)
    }
  )
  .subscribe()
```

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰
```javascript
// ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
const leaderboardSubscription = supabase
  .channel('leaderboard')
  .on('postgres_changes', 
    { event: '*', schema: 'public', table: 'typing_sessions' },
    (payload) => {
      updateLeaderboard()
    }
  )
  .subscribe()
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰

| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ |
|--------|------|
| 400 | ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ |
| 401 | èªè¨¼ã‚¨ãƒ©ãƒ¼ |
| 403 | æ¨©é™ã‚¨ãƒ©ãƒ¼ |
| 404 | ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ |
| 422 | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ |
| 429 | ãƒ¬ãƒ¼ãƒˆåˆ¶é™ |
| 500 | ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ |

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "error": {
    "code": 400,
    "message": "Invalid request parameters",
    "details": {
      "field": "email",
      "issue": "Email format is invalid"
    }
  }
}
```

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```javascript
// ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°é–¢æ•°
function handleApiError(error) {
  if (error.code === 401) {
    // èªè¨¼ã‚¨ãƒ©ãƒ¼ - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    redirectToLogin()
  } else if (error.code === 429) {
    // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ - ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
    setTimeout(retryRequest, 1000)
  } else {
    // ãã®ä»–ã®ã‚¨ãƒ©ãƒ¼ - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥
    showErrorMessage(error.message)
  }
}
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### Row Level Security (RLS)
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
ALTER TABLE typing_sessions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own sessions" ON typing_sessions
  FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own sessions" ON typing_sessions
  FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own sessions" ON typing_sessions
  FOR UPDATE USING (auth.uid() = user_id);
```

### ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
```javascript
// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
function validateSessionData(data) {
  const errors = []
  
  if (data.wpm < 0 || data.wpm > 200) {
    errors.push('WPM must be between 0 and 200')
  }
  
  if (data.accuracy < 0 || data.accuracy > 100) {
    errors.push('Accuracy must be between 0 and 100')
  }
  
  return errors
}
```

## ãƒ¬ãƒ¼ãƒˆåˆ¶é™

### APIåˆ¶é™
- **èªè¨¼ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: 10å›/åˆ†
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ**: 100å›/åˆ†
- **çµ±è¨ˆå–å¾—**: 1000å›/åˆ†
- **è¨­å®šæ›´æ–°**: 50å›/åˆ†

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´åˆ¶é™
```javascript
// ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®å®Ÿè£…
class RateLimiter {
  constructor(maxRequests, timeWindow) {
    this.maxRequests = maxRequests
    this.timeWindow = timeWindow
    this.requests = []
  }
  
  canMakeRequest() {
    const now = Date.now()
    this.requests = this.requests.filter(time => now - time < this.timeWindow)
    
    if (this.requests.length < this.maxRequests) {
      this.requests.push(now)
      return true
    }
    
    return false
  }
}
```

## ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

### æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹
```json
{
  "success": true,
  "data": {
    // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‡ãƒ¼ã‚¿
  },
  "timestamp": "2024-01-01T00:00:00Z",
  "version": "1.0.0"
}
```

### ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
```json
{
  "success": true,
  "data": [
    // ã‚¢ã‚¤ãƒ†ãƒ é…åˆ—
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 150,
    "total_pages": 8,
    "has_next": true,
    "has_prev": false
  }
}
```

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
```json
{
  "success": true,
  "data": {
    // ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿
  },
  "meta": {
    "generated_at": "2024-01-01T00:00:00Z",
    "cache_status": "hit",
    "processing_time_ms": 45
  }
}
```

## ä½¿ç”¨ä¾‹

### å®Œå…¨ãªã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³
```javascript
// 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹
const session = await createSession({
  planet_id: 'mars',
  text_id: 'mars_001'
})

// 2. ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ä¸­ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼‰
const updateInterval = setInterval(async () => {
  await updateSession(session.id, {
    wpm: currentWpm,
    accuracy: currentAccuracy,
    time_taken: elapsedTime
  })
}, 1000)

// 3. ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†
clearInterval(updateInterval)
await finalizeSession(session.id, finalStats)
```

### çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
```javascript
// çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨è¡¨ç¤º
const stats = await getStatistics()
const planetStats = await getPlanetStatistics()

// Chart.jsã§ã‚°ãƒ©ãƒ•è¡¨ç¤º
updatePerformanceChart(stats.recent_activity)
updatePlanetChart(planetStats)
```

---

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**æœ€çµ‚æ›´æ–°**: 2024å¹´1æœˆ  
**ä½œæˆè€…**: Cosmic Typing Adventure Team 